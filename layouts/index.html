<!DOCTYPE html>
<html lang="{{ .Site.LanguageCode }}">

<head>
  {{ partial "head/metadata.html" . }}
  {{ partial "head/openGraph.html" . }}
  {{ partial "head/favicons.html" . }}
  {{ partial "head/css.html" . }}
  {{ partial "head/custom_head.html" . }}
</head>

<body>
  {{ with .Site.GetPage "/home" }}
  <section id="top" class="hero is-fullheight">
    <!-- Hero head section to play nice with Bulma -->
    <div class="hero-head"></div>

    <!-- Super sweet Hero body title -->
    <div class="hero-body">
      <div class="container has-text-centered">
        <!-- Title and tagline -->
        <h1 class="bold-title fade-in one">
          {{ .Title | markdownify }}
        </h1>
        <div class="subtitle is-3 fade-in two">
          {{ .Content }}
        </div>
        <!-- End title and tagline -->
      </div>
    </div> <!-- End of Hero body -->

    <div class="hero-foot">
      <div class="container">
        <hr>
        <nav class="navbar" role="navigation" aria-label="main navigation">
          <a role="button" class="navbar-burger" data-target="navMenu" aria-label="menu" aria-expanded="false">
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
          </a>
          <div class="navbar-menu has-content-centered" id="navMenu">
            <a class="navbar-item" href="/">首页</a>
            <a class="navbar-item" href="/#about">关于</a>
            <a class="navbar-item" href="/#skills">技能</a>
            <a class="navbar-item" href="/#projects">项目</a>
            <a class="navbar-item" href="/#contact">联系</a>
          </div>
        </nav>
        <hr>
      </div>
    </div>
    {{ end }}
  </section> <!-- Done with Hero -->

  {{ with .Site.GetPage "/home" }}
  {{ $home := . }}
  {{ $pages := .Resources.ByType "page" }}

  {{ range sort $pages "Params.weight" }}
  {{ if ne .Name "contact.md" }}
  <!-- Range through all sections in /home except contact.md -->
  <div class="section" id="{{ .File.TranslationBaseName }}">
    <div class="container">
      <h2 class="title is-2 has-text-centered">{{ .Title | markdownify }}</h2>
      {{ if eq .File.TranslationBaseName "skills" }}
      {{ partial "home/skills.html" . }}
      {{ else if eq .File.TranslationBaseName "about" }}
      {{ partial "home/about.html" . }}
      {{ else if .Params.Image }}
      <div class="columns">
        <div class="column is-one-third has-text-centered">
          {{ with $home.Resources.GetMatch .Params.Image }}
          {{ with .Resize "320x" }}
          <img class="img-responsive avatar" src="{{ .Permalink }}" alt="{{ .Name }}">
          {{ end }}
          {{ end }}
        </div>
        <div class="markdown column">
          {{ .Content }}
        </div>
      </div>
      {{ else }}
      <div class="markdown has-text-centered">
        {{ .Content }}
      </div>
      {{ end }}
    </div>
    <!-- End container-->
  </div>
  <div class="container">
    <hr>
  </div>
  {{ end }}
  {{ end }}

  <!-- 联系部分 -->
  {{ with .Resources.GetMatch "contact.md" }}
  <div class="section" id="{{ .File.TranslationBaseName }}">
    <div class="container has-text-centered">
      <h2 class="title is-2">{{ .Title | markdownify }}</h2>
      <div class="markdown">
        {{ .Content }}
      </div>
      {{ with $.Site.Params.email }}
      <h3 class="subtitle is-3 has-text-centered top-pad">
        <a href="mailto:{{ . }}">{{ . }}</a>
      </h3>
      {{ end }}
    </div>
    <!-- End Contact container -->
  </div>
  {{ end }}
  <!-- End Contact section -->
  {{ end }}

  <footer class="footer">
    <div class="container">
      <div class="content has-text-centered">
        <p>
          © {{ now.Year }} {{ .Site.Title }}
        </p>
      </div>
    </div>
  </footer>

  <!-- 添加导航栏的JavaScript -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // 获取所有的 "navbar-burger" 元素
      const $navbarBurgers = Array.prototype.slice.call(document.querySelectorAll('.navbar-burger'), 0);

      // 检查是否有 navbar burger
      if ($navbarBurgers.length > 0) {
        // 为每个 navbar burger 添加点击事件
        $navbarBurgers.forEach(el => {
          el.addEventListener('click', () => {
            // 获取目标的 data-target 属性
            const target = el.dataset.target;
            const $target = document.getElementById(target);

            // 切换 "is-active" 类
            el.classList.toggle('is-active');
            $target.classList.toggle('is-active');
          });
        });
      }
    });
  </script>
</body>

</html>